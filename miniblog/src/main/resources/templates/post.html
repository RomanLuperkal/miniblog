<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${post.postName}">Post</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h1 th:text="${post.postName}">Название поста</h1>

    <!-- Изображение -->
    <div class="mt-4">
        <img th:if="${post.image != null}" th:src="${post.image}" alt="Post Image" class="img-fluid rounded">
    </div>

    <!-- Текст поста -->
    <div class="mt-4" id="postText">
        <p th:utext="${#strings.unescapeJava(#strings.replace(#strings.escapeJava(post.text),'\n','&lt;br /&gt;'))}"></p>
    </div>


    <!-- Теги -->
    <div class="mt-4">
        <strong>Теги:</strong>
        <span th:text="${post.tag}">Tags</span>
    </div>

    <!-- Кнопки -->
    <div class="mt-4">
        <button class="btn btn-warning me-2">Редактировать</button>
        <button class="btn btn-danger">Удалить</button>
    </div>

    <!-- Будущие элементы -->
    <!-- Добавление комментария -->
    <!-- Лайки -->

</div>
</body>
<script>
    window.onload = function() {
        // Получаем элемент, содержащий текст поста
        const postTextElement = document.getElementById('postText');

        // Если элемент существует
        if (postTextElement) {
            // Получаем текст поста (учитываем как \n, так и \r)
            let text = postTextElement.innerText || postTextElement.textContent;

            // Заменяем все символы новой строки \n и возвраты каретки \r на <br>
            let formattedText = text.replace(/(\r\n|\n|\r)/g, '<br>');

            // Обновляем содержимое элемента с добавленными <br>
            postTextElement.innerHTML = formattedText;
        }
    };
</script>
</html>
